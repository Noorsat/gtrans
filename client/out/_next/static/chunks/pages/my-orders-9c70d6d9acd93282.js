(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{6140:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-orders",function(){return e(8105)}])},6902:function(n,t,e){"use strict";e.d(t,{AW:function(){return d},Bx:function(){return s},GA:function(){return f},PF:function(){return o},PQ:function(){return l},ZG:function(){return c},gF:function(){return a},x4:function(){return u},z2:function(){return i}});var r=e(3084),u=(e(3997),function(n){return r.Z.post("/user/login",n)}),i=function(n){return r.Z.post("/user/signup",n)},o=function(n){return r.Z.put("/user/like/"+n,{})},c=function(n){return r.Z.put("/user/unlike/"+n,{})},a=function(n){return r.Z.post("user/forgot-password",n)},s=function(n,t){return r.Z.get("/user/reset-password/"+n+"/"+t)},l=function(n,t,e){return r.Z.post("/user/reset-password/"+n+"/"+t,e)},d=function(){return r.Z.get("/user/all")},f=function(n){return r.Z.get("/user/"+n)}},3084:function(n,t,e){"use strict";var r=e(9669),u=e.n(r)().create({baseURL:"https://backend.gtrans.kz"});t.Z=u},7570:function(n,t,e){"use strict";e.d(t,{AU:function(){return o},ED:function(){return a},LV:function(){return c},R2:function(){return p},TX:function(){return d},Xz:function(){return f},dW:function(){return s},ip:function(){return l}});var r=e(7568),u=e(655),i=e(3084),o=function(){var n=(0,r.Z)((function(){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.Z.get("/orders")];case 1:return[2,n.sent()]}}))}));return function(){return n.apply(this,arguments)}}(),c=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.post("/orders",n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}(),a=function(){var n=(0,r.Z)((function(n,t){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,i.Z.put("/orders/add/request/"+t,n)];case 1:return[2,e.sent()]}}))}));return function(t,e){return n.apply(this,arguments)}}(),s=function(){var n=(0,r.Z)((function(n,t){return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return[4,i.Z.put("/orders/status/request/"+t,n)];case 1:return[2,e.sent()]}}))}));return function(t,e){return n.apply(this,arguments)}}(),l=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.put("/orders/tracker/change",n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}(),d=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.put("/orders/tracker/return",n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}(),f=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.get("/orders/tracker/"+n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}(),p=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.get("/orders/account/"+n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}()},1113:function(n,t,e){"use strict";e.d(t,{X:function(){return c},h:function(){return o}});var r=e(7568),u=e(655),i=e(3084),o=function(){var n=(0,r.Z)((function(n){return(0,u.__generator)(this,(function(t){switch(t.label){case 0:return[4,i.Z.post("/requests",n)];case 1:return[2,t.sent()]}}))}));return function(t){return n.apply(this,arguments)}}(),c=function(){var n=(0,r.Z)((function(){return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return[4,i.Z.get("/requests")];case 1:return[2,n.sent()]}}))}));return function(){return n.apply(this,arguments)}}()},8105:function(n,t,e){"use strict";e.r(t);var r=e(5893),u=e(3448),i=e(1577),o=e(5019),c=e(2071),a=e(2688),s=e(7294),l=e(7570),d=(e(381),e(1113)),f=e(1163),p=e(6245),v=e(3995),h=e.n(v);e(6902);t.default=function(){var n=(0,s.useState)(),t=n[0],e=n[1],v=(0,s.useState)(),y=v[0],k=v[1],Z=(0,s.useState)(),m=Z[0],g=(Z[1],(0,s.useState)()),w=g[0],_=(g[1],(0,s.useState)()),x=_[0],C=_[1],S=(0,s.useState)(),I=S[0],b=S[1],j=(0,s.useState)(),N=j[0],q=j[1],E=(0,f.useRouter)(),X=(0,s.useState)(),R=X[0],A=X[1];(0,s.useEffect)((function(){(0,l.AU)().then((function(n){var t=[],r=n.data.map((function(e,r){return t.includes(null===e||void 0===e?void 0:e.individualCode)||(e.rowSpan=n.data.filter((function(n,t){return(null===n||void 0===n?void 0:n.individualCode)===(null===e||void 0===e?void 0:e.individualCode)})).length),t.push(null===e||void 0===e?void 0:e.individualCode),e}));e(r)})),(0,d.X)().then((function(n){A(n.data)}));var n=JSON.parse(localStorage.getItem("user"));if(n){var t=(0,p.Z)(null===n||void 0===n?void 0:n.token);C(t)}else E.push("/login")}),[]);var O=(0,s.useState)(!1),U=O[0],D=O[1],F=function(){D(!1);var n={trackCode:N,individualCode:m};(0,l.ip)(n).then((function(n){(null===n||void 0===n?void 0:n.status)<400&&(q(""),k(0),u.Z.success({message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0442\u0440\u0435\u043a\u0435\u0440 \u043a\u043e\u0434"}),E.push({pathname:"/tracking",query:{trackCode:N}}),q(""))}))},P=function(){b(!1)},z=function(n,t,r){var u={company:null===n||void 0===n?void 0:n.company,price:null===n||void 0===n?void 0:n.price,comment:null===n||void 0===n?void 0:n.comment,requestId:(null===n||void 0===n?void 0:n.requestId)||(null===n||void 0===n?void 0:n._id),status:t};1===t?(0,l.ED)(u,y).then((function(n){(0,l.AU)().then((function(n){e(n.data)})),(0,d.X)().then((function(n){A(n.data)})),D(!1)})):2!==t&&3!==t&&4!==t||(0,l.dW)(u,y||r).then((function(n){(0,l.AU)().then((function(n){e(n.data)})),(0,d.X)().then((function(n){A(n.data)})),D(!1)}))},Q=[{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0430",dataIndex:"type",key:"type"},{title:"\u0412\u0435\u0441 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u0440\u043e\u0431\u043a\u0438 (\u043a\u0433)",dataIndex:"weight",key:"weight"},{title:"\u0414\u043b\u0438\u043d\u0430 (\u043c3)",dataIndex:"len",key:"len"},{title:"\u0428\u0438\u0440\u0438\u043d\u0430 (\u043c3)",dataIndex:"width",key:"width"},{title:"\u0412\u044b\u0441\u043e\u0442\u0430 (\u043c3)",dataIndex:"height",key:"height"},{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",dataIndex:"count",key:"count"},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"comment",key:"comment"},{title:"\u0418\u043d\u0434 \u043a\u043e\u0434",dataIndex:"individualCode",key:"individualCode",onCell:function(n,t){return{rowSpan:n.rowSpan?n.rowSpan:0}}},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",key:"price",onCell:function(n,t){return{rowSpan:n.rowSpan?n.rowSpan:0}},render:function(n,t){return(0,r.jsxs)(r.Fragment,{children:[t.price,"$"]})}},{title:"\u0422\u0440\u0435\u043a\u0438\u043d\u0433",dataIndex:"request",key:"request",onCell:function(n,t){return{rowSpan:n.rowSpan?n.rowSpan:0}},render:function(n,t){return(0,r.jsx)(i.Z,{className:h().trackCode,onClick:function(){return E.push({pathname:"/tracking",query:{trackCode:t.individualCode}})},type:"primary",children:"\u041e\u0442\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})}}],T=[{title:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",dataIndex:"company",key:"company"},{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b (\u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430)",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",key:"price"},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"comment",key:"comment"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430",dataIndex:"acceptRequest",key:"acceptRequest",render:function(n,t){var e,u=null===w||void 0===w?void 0:w.acceptedRequest.filter((function(n){return n.requestId===(null===t||void 0===t?void 0:t._id)}));if(0===u.length)return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return z(t,1)},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"});if((null===w||void 0===w||null===(e=w.acceptedRequest)||void 0===e?void 0:e.filter((function(n){return 3===(null===n||void 0===n?void 0:n.status)})).length)>0){var o,c;if(3===(null===(o=u[0])||void 0===o?void 0:o.status))return(0,r.jsx)("div",{className:"text-center",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"});switch(null===(c=u[0])||void 0===c?void 0:c.status){case 1:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return z(t,2)},disabled:!0,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0437\u0430\u043a\u0430\u0437"});case 2:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return z(t,3)},disabled:!0,children:"\u041f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437"})}}else{var a;switch(null===(a=u[0])||void 0===a?void 0:a.status){case 1:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return z(t,2)},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0437\u0430\u043a\u0430\u0437"});case 2:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return z(t,3)},children:"\u041f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437"});case 3:return(0,r.jsx)("div",{className:"text-center",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"})}}}}];return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{dataSource:null===t||void 0===t?void 0:t.filter((function(n){return(null===n||void 0===n?void 0:n.accountId)===(null===x||void 0===x?void 0:x._id)})),columns:Q,title:function(){return"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"},scroll:{x:800},pagination:!1}),(0,r.jsx)(c.Z,{title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438",open:U,onOk:F,onCancel:P,width:850,footer:[(0,r.jsx)(i.Z,{onClick:function(){return D(!1)},children:"\u041d\u0430\u0437\u0430\u0434"})],children:(0,r.jsx)(o.Z,{columns:T,dataSource:null===R||void 0===R?void 0:R.filter((function(n){return n.orderID==y})),pagination:!1})}),(0,r.jsx)(c.Z,{open:I,title:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0440\u0435\u043a \u043a\u043e\u0434",onCancel:P,footer:[(0,r.jsx)(i.Z,{type:"primary",onClick:F,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u0440\u0435\u043a \u043a\u043e\u0434"})],children:(0,r.jsx)(a.Z,{placeholder:"\u0422\u0440\u0435\u043a \u043a\u043e\u0434",value:N,onChange:function(n){return q(n.target.value)}})})]})}},3995:function(n){n.exports={like:"MyOrders_like__DinYI",unlike:"MyOrders_unlike__FQQ3J"}}},function(n){n.O(0,[885,276,859,984,909,688,621,997,171,369,444,526,19,774,888,179],(function(){return t=6140,n(n.s=t);var t}));var t=n.O();_N_E=t}]);