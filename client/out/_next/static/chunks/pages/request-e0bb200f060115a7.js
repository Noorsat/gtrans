(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{6245:function(n,e,i){"use strict";function o(n){this.message=n}o.prototype=new Error,o.prototype.name="InvalidCharacterError";var t="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,t,u=0,l=0,r="";t=e.charAt(l++);~t&&(i=u%4?64*i+t:t,u++%4)?r+=String.fromCharCode(255&i>>(-2*u&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return r};function u(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(t(n).replace(/(.)/g,(function(n,e){var i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(e)}catch(n){return t(e)}}function l(n){this.message=n}l.prototype=new Error,l.prototype.name="InvalidTokenError",e.Z=function(n,e){if("string"!=typeof n)throw new l("Invalid token specified");var i=!0===(e=e||{}).header?0:1;try{return JSON.parse(u(n.split(".")[i]))}catch(n){throw new l("Invalid token specified: "+n.message)}}},2478:function(n,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return i(9844)}])},867:function(n,e,i){"use strict";i.d(e,{z:function(){return o}});var o=function(n){return 1===String(n).length?"00"+n:2===String(n).length?"0"+n:n}},3084:function(n,e,i){"use strict";var o=i(9669),t=i.n(o)().create({baseURL:"https://backend.gtrans.kz"});e.Z=t},7570:function(n,e,i){"use strict";i.d(e,{AU:function(){return l},ED:function(){return d},LV:function(){return r},R2:function(){return s},Xz:function(){return a},dW:function(){return v},ip:function(){return c}});var o=i(7568),t=i(655),u=i(3084),l=function(){var n=(0,o.Z)((function(){return(0,t.__generator)(this,(function(n){switch(n.label){case 0:return[4,u.Z.get("/orders")];case 1:return[2,n.sent()]}}))}));return function(){return n.apply(this,arguments)}}(),r=function(){var n=(0,o.Z)((function(n){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.post("/orders",n)];case 1:return[2,e.sent()]}}))}));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=(0,o.Z)((function(n,e){return(0,t.__generator)(this,(function(i){switch(i.label){case 0:return[4,u.Z.put("/orders/add/request/"+e,n)];case 1:return[2,i.sent()]}}))}));return function(e,i){return n.apply(this,arguments)}}(),v=function(){var n=(0,o.Z)((function(n,e){return(0,t.__generator)(this,(function(i){switch(i.label){case 0:return[4,u.Z.put("/orders/status/request/"+e,n)];case 1:return[2,i.sent()]}}))}));return function(e,i){return n.apply(this,arguments)}}(),c=function(){var n=(0,o.Z)((function(n){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.put("/orders/tracker/change",n)];case 1:return[2,e.sent()]}}))}));return function(e){return n.apply(this,arguments)}}(),a=function(){var n=(0,o.Z)((function(n){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.get("/orders/tracker/"+n)];case 1:return[2,e.sent()]}}))}));return function(e){return n.apply(this,arguments)}}(),s=function(){var n=(0,o.Z)((function(n){return(0,t.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.get("/orders/account/"+n)];case 1:return[2,e.sent()]}}))}));return function(e){return n.apply(this,arguments)}}()},9844:function(n,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var o=i(6042),t=i(9396),u=i(943);var l=i(3375);var r=i(1566);function d(n){return function(n){if(Array.isArray(n))return(0,u.Z)(n)}(n)||(0,l.Z)(n)||(0,r.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=i(5893),c=i(1369),a=i(3448),s=i(2071),h=i(1577),m=i(9636),f=i(2688),g=i(7294),p=i(7570),w=i(4858),b=i.n(w),N=(i(381),i(6245)),_=i(1163),y=i(867),Z=i(8193),x=function(){c.Z.Option;var n=(0,_.useRouter)(),e=(0,g.useState)({len:"",width:"",height:""}),i=e[0],u=e[1],l=(0,g.useState)(),r=l[0],w=l[1],x=(0,g.useState)(),j=x[0],C=x[1],k=(0,g.useState)([{type:"",len:"",width:"",height:"",weight:"",count:1,comment:""}]),S=k[0],E=k[1],I=(0,g.useState)(),R=I[0],q=I[1],A=(0,g.useState)(!1),z=A[0],L=A[1],O=(0,g.useState)(),T=O[0],U=O[1],V=(0,g.useState)(!1);V[0],V[1];(0,g.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(e){var i=(0,N.Z)(null===e||void 0===e?void 0:e.token);C(i)}else n.push("/login")}),[]);var X=function(){a.Z.success({message:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0441\u043e\u0437\u0434\u0430\u043d"}),u({}),n.push("/my-orders")},D=function(n){var e=S.reduce((function(n,e){return n+e.count*e.weight}),0);return e>=100?"H792-"+(0,y.z)(n):e<100?"SM215-"+(0,y.z)(n):void 0};(0,g.useEffect)((function(){var n=0;null===S||void 0===S||S.map((function(e){if((null===e||void 0===e?void 0:e.weight.length)>0&&(null===e||void 0===e?void 0:e.len.length)>0&&(null===e||void 0===e?void 0:e.width.length)>0&&(null===e||void 0===e?void 0:e.height.length)>0){var i=Number(null===e||void 0===e?void 0:e.weight)/(Number(null===e||void 0===e?void 0:e.len)*Number(null===e||void 0===e?void 0:e.width)*Number(null===e||void 0===e?void 0:e.height));if(i&&e.weight>100){if("first"===(null===e||void 0===e?void 0:e.type))if(i<100){var o=Number(null===e||void 0===e?void 0:e.len)*Number(null===e||void 0===e?void 0:e.width)*Number(null===e||void 0===e?void 0:e.height);n+=490*o*(null===e||void 0===e?void 0:e.count)}else i>100&&i<=110?n+=4.3*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>110&&i<=120?n+=4.2*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>120&&i<=130?n+=4.1*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>130&&i<=140?n+=4*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>140&&i<=150?n+=3.9*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>150&&i<=160?n+=3.8*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>160&&i<=170?n+=3.7*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>170&&i<=180?n+=3.6*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>180&&i<=190?n+=3.5*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>190&&i<=200?n+=3.4*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>200&&i<=250?n+=3.3*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>250&&i<=300?n+=3.2*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>300&&i<=350?n+=3.1*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>350&&i<=400?n+=3*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>400&&i<=600?n+=2.9*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>600&&i<=800?n+=2.8*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>800&&i<=1e3?n+=2.7*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>1e3&&(n+=2.6*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count));else if("second"===(null===e||void 0===e?void 0:e.type))if(i<100){var t=Number(null===e||void 0===e?void 0:e.len)*Number(null===e||void 0===e?void 0:e.width)*Number(null===e||void 0===e?void 0:e.height);n+=580*t*(null===e||void 0===e?void 0:e.count)}else i>100&&i<=110?n+=5.5*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>110&&i<=120?n+=5.4*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>120&&i<=130?n+=5.3*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>130&&i<=140?n+=5.2*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>140&&i<=150?n+=5.1*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>150&&i<=160?n+=5*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>160&&i<=170?n+=4.9*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>170&&i<=180?n+=4.8*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>180&&i<=190?n+=4.7*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>190&&i<=200?n+=4.6*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>200&&i<=250?n+=4.5*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>250&&i<=300?n+=4.4*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>300&&i<=350?n+=4.3*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):i>350&&i<=400?n+=4.2*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count):(i>400&&i<=600||i>600&&i<=800||i>800&&i<=1e3||i>1e3)&&(n+=4.1*Number(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count))}else if((null===e||void 0===e?void 0:e.weight)>20&&(null===e||void 0===e?void 0:e.weight)<=100){var u=Number(null===e||void 0===e?void 0:e.len)*Number(null===e||void 0===e?void 0:e.width)*Number(null===e||void 0===e?void 0:e.height);"first"===(null===e||void 0===e?void 0:e.type)?n+=490*u*(null===e||void 0===e?void 0:e.count):"second"===(null===e||void 0===e?void 0:e.type)&&(n+=580*u*(null===e||void 0===e?void 0:e.count))}}else n+=7*(null===e||void 0===e?void 0:e.weight)*(null===e||void 0===e?void 0:e.count)})),0!==n&&q(n),w(S.reduce((function(n,e){return n+Number(null===e||void 0===e?void 0:e.len)*Number(null===e||void 0===e?void 0:e.height)*Number(null===e||void 0===e?void 0:e.width)*(null===e||void 0===e?void 0:e.count)}),0))}),[S]);var F=function(n,e,i){var o=/^[0-9\b]+$/;E(S.map((function(t,u){return u===n&&("weight"===e||"len"===e||"width"===e||"height"===e||"count"===e?(""===i||o.test(i))&&(t[e]=i):"comment"===e&&(t[e]=i)),t})))};return(0,v.jsxs)("div",{children:[(0,v.jsx)(s.Z,{open:z,footer:[(0,v.jsx)(h.Z,{onClick:X,children:"\u041e\u041a"})],onCancel:X,children:(0,v.jsxs)("div",{className:b().ind,children:["\u0412\u0430\u0448 \u0438\u043d\u0434\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u0434: ",(0,v.jsx)("span",{children:T})]})}),(0,v.jsx)("div",{className:"mt-5 text-center",children:(0,v.jsx)("h4",{children:"\u041a\u0430\u043b\u044c\u043a\u0443\u043b\u044f\u0442\u043e\u0440"})}),(0,v.jsxs)(m.Z,{className:"w-md-50 w-75 ms-auto me-auto",children:[S.map((function(n,e){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)(c.Z,{placeholder:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0430",className:"w-100",style:{width:"100%"},onChange:function(n,i){return function(n,e,i){E(null===S||void 0===S?void 0:S.map((function(o,t){return t===i&&(o.type=n,o.name=e.label),o})))}(n,i,e)},options:[{label:"\u041e\u0434\u0435\u0436\u0434\u0430 \u0438 \u043e\u0431\u0443\u0432\u044c",value:"second"},{label:"\u041e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435 (\u0445\u043e\u0437 \u0442\u043e\u0432\u0430\u0440\u044b)",value:"first"}]})}),(0,v.jsxs)("div",{className:"d-block gap-3 mb-3 d-md-flex",children:[(0,v.jsx)(f.Z,{placeholder:"\u0412\u0435\u0441 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u0440\u043e\u0431\u043a\u0438 (\u043a\u0433)",className:"mb-3 mb-md-0",onChange:function(n){return F(e,"weight",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.weight}),(null===n||void 0===n?void 0:n.weight)>20&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.Z,{placeholder:"\u0414\u043b\u0438\u043d\u0430 (\u043c)",className:"mb-3 me-3 mb-md-0",onChange:function(n){return F(e,"len",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.len}),(0,v.jsx)(f.Z,{placeholder:"\u0428\u0438\u0440\u0438\u043d\u0430 (\u043c)",className:"mb-3 me-3 mb-md-0",onChange:function(n){return F(e,"width",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.width}),(0,v.jsx)(f.Z,{placeholder:"\u0412\u044b\u0441\u043e\u0442\u0430 (\u043c)",className:"mb-3 me-3 mb-md-0",onChange:function(n){return F(e,"height",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.height})]}),(0,v.jsx)(f.Z,{placeholder:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",className:"mb-3 mb-md-0",onChange:function(n){return F(e,"count",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.count})]}),(0,v.jsx)(f.Z,{placeholder:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",className:"w-100 mb-3",onChange:function(n){return F(e,"comment",n.target.value.replace(",","."))},value:null===n||void 0===n?void 0:n.comment}),(null===S||void 0===S?void 0:S.length)>1&&(0,v.jsx)(h.Z,{type:"danger",className:"w-100 mb-3",onClick:function(){return function(n){E(null===S||void 0===S?void 0:S.filter((function(e,i){return n!==i})))}(e)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})]})})),(0,v.jsx)("div",{className:b().plus,children:(0,v.jsx)(Z.Lfi,{className:b().plus__icon,size:30,onClick:function(){E(d(S).concat([{type:"",len:"",width:"",height:"",weight:"",count:1,comment:""}]))}})}),R>0&&(0,v.jsxs)("div",{className:b().price,children:["\u0426\u0435\u043d\u0430: ",(0,v.jsx)("span",{children:function(n){var e;return(null===i||void 0===i?void 0:i.weight)>20&&(null===i||void 0===i||null===(e=i.type)||void 0===e?void 0:e.length)>0&&(""==i.len||""==i.width||""==i.height)?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f":n+" $"}(R)})]}),r>0&&(0,v.jsxs)("div",{className:b().price,children:["\u041e\u0431\u0449\u0438\u0439 \u043e\u0431\u044a\u0435\u043c: ",(0,v.jsxs)("span",{children:[r," \u043c3"]})]}),(0,v.jsx)(h.Z,{type:"primary",className:"w-100",onClick:function(){(0,p.R2)(null===j||void 0===j?void 0:j._id).then((function(n){var e=D(null===j||void 0===j?void 0:j.id).charAt(0),i=0;n.data.map((function(n){n.individualCode.charAt(0)===e&&i++}));var u=S.map((function(n){return(0,t.Z)((0,o.Z)({},n),{accountId:null===j||void 0===j?void 0:j._id,type:null===n||void 0===n?void 0:n.name,individualCode:D(null===j||void 0===j?void 0:j.id)+"-"+(i+1)})}));(0,p.LV)(u).then((function(n){201===(null===n||void 0===n?void 0:n.status)&&(L(!0),U(D(null===j||void 0===j?void 0:j.id)+"-"+(i+1)))}))}))},disabled:function(){var n=!1;return null===S||void 0===S||S.map((function(e){Number(null===e||void 0===e?void 0:e.weight)>20?""!==e.type&&""!==(null===e||void 0===e?void 0:e.weight)&&""!==(null===e||void 0===e?void 0:e.len)&&""!==(null===e||void 0===e?void 0:e.height)&&""!==(null===e||void 0===e?void 0:e.width)&&""!=(null===e||void 0===e?void 0:e.count)||(n=!0):""!==e.type&&""!==e.weight&&""!==e.count||(n=!0)})),n}(),children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})}},4858:function(n){n.exports={price:"Request_price__kp5o5",ind:"Request_ind__dD5Ra",volume:"Request_volume__SAo7V",plus:"Request_plus__LqwIx",plus__icon:"Request_plus__icon__NALZf"}},1163:function(n,e,i){n.exports=i(387)}},function(n){n.O(0,[885,276,811,984,909,688,621,636,954,369,538,774,888,179],(function(){return e=2478,n(n.s=e);var e}));var e=n.O();_N_E=e}]);