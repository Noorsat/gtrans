(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{6140:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-orders",function(){return e(8105)}])},6902:function(t,n,e){"use strict";e.d(n,{Bx:function(){return a},PF:function(){return o},PQ:function(){return l},ZG:function(){return c},gF:function(){return s},x4:function(){return i},z2:function(){return u}});var r=e(3084),i=(e(3997),function(t){return r.Z.post("/user/login",t)}),u=function(t){return r.Z.post("/user/signup",t)},o=function(t){return r.Z.put("/user/like/"+t,{})},c=function(t){return r.Z.put("/user/unlike/"+t,{})},s=function(t){return r.Z.post("user/forgot-password",t)},a=function(t,n){return r.Z.get("/user/reset-password/"+t+"/"+n)},l=function(t,n,e){return r.Z.post("/user/reset-password/"+t+"/"+n,e)}},3084:function(t,n,e){"use strict";var r=e(9669),i=e.n(r)().create({baseURL:"https://backend.gtrans.kz"});n.Z=i},7570:function(t,n,e){"use strict";e.d(n,{AU:function(){return o},ED:function(){return s},LV:function(){return c},dW:function(){return a}});var r=e(7568),i=e(655),u=e(3084),o=function(){var t=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,u.Z.get("/orders")];case 1:return[2,t.sent()]}}))}));return function(){return t.apply(this,arguments)}}(),c=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,u.Z.post("/orders",t)];case 1:return[2,n.sent()]}}))}));return function(n){return t.apply(this,arguments)}}(),s=function(){var t=(0,r.Z)((function(t,n){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.put("/orders/add/request/"+n,t)];case 1:return[2,e.sent()]}}))}));return function(n,e){return t.apply(this,arguments)}}(),a=function(){var t=(0,r.Z)((function(t,n){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,u.Z.put("/orders/status/request/"+n,t)];case 1:return[2,e.sent()]}}))}));return function(n,e){return t.apply(this,arguments)}}()},1113:function(t,n,e){"use strict";e.d(n,{X:function(){return c},h:function(){return o}});var r=e(7568),i=e(655),u=e(3084),o=function(){var t=(0,r.Z)((function(t){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,u.Z.post("/requests",t)];case 1:return[2,n.sent()]}}))}));return function(n){return t.apply(this,arguments)}}(),c=function(){var t=(0,r.Z)((function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return[4,u.Z.get("/requests")];case 1:return[2,t.sent()]}}))}));return function(){return t.apply(this,arguments)}}()},8105:function(t,n,e){"use strict";e.r(n);var r=e(5893),i=e(1577),u=e(8711),o=e(2071),c=e(7294),s=e(7570),a=(e(381),e(1113)),l=e(1163),d=e(6245),f=e(8193),v=e(3995),p=e.n(v),h=e(6902);n.default=function(){var t=(0,c.useState)(),n=t[0],e=t[1],v=(0,c.useState)(),x=v[0],y=v[1],_=(0,c.useState)(),k=_[0],m=_[1],Z=(0,c.useState)(),g=Z[0],w=Z[1],j=(0,l.useRouter)(),I=(0,c.useState)(),N=I[0],q=I[1];(0,c.useEffect)((function(){(0,s.AU)().then((function(t){e(t.data)})),(0,a.X)().then((function(t){q(t.data)}));var t=JSON.parse(localStorage.getItem("user"));if(t){var n=(0,d.Z)(null===t||void 0===t?void 0:t.token);w(n)}else j.push("/login")}),[]);console.log(x);var b=(0,c.useState)(!1),C=b[0],R=b[1],S=function(t,n,r){console.log(t);var i={company:null===t||void 0===t?void 0:t.company,price:null===t||void 0===t?void 0:t.price,comment:null===t||void 0===t?void 0:t.comment,requestId:(null===t||void 0===t?void 0:t.requestId)||(null===t||void 0===t?void 0:t._id),status:n};1===n?(0,s.ED)(i,x).then((function(t){(0,s.AU)().then((function(t){e(t.data)})),(0,a.X)().then((function(t){q(t.data)})),R(!1)})):2!==n&&3!==n&&4!==n||(0,s.dW)(i,x||r).then((function(t){(0,s.AU)().then((function(t){e(t.data)})),(0,a.X)().then((function(t){q(t.data)})),R(!1)}))},E=[{title:"ID",dataIndex:"_id",key:"_id",width:10},{title:"\u041e\u0442\u043a\u0443\u0434\u0430",dataIndex:"pointA",key:"pointA"},{title:"\u041a\u0443\u0434\u0430",dataIndex:"pointB",key:"pointB"},{title:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u0433\u0440\u0443\u0437\u0430",dataIndex:"type",key:"type"},{title:"\u0412\u0435\u0441 (\u043a\u0433)",dataIndex:"weight",key:"weight"},{title:"\u041e\u0431\u044a\u0435\u043c\u044b (\u043c3)",dataIndex:"volume",key:"volume"},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"count",key:"count"},{title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438",dataIndex:"request",key:"request",render:function(t,n){var e,u;return(null===n||void 0===n||null===(e=n.acceptedRequest)||void 0===e?void 0:e.filter((function(t){return 4===t.status})).length)>0?(0,r.jsx)("div",{children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e!"}):(null===n||void 0===n||null===(u=n.acceptedRequest)||void 0===u?void 0:u.filter((function(t){return 3===t.status})).length)>0?(0,r.jsxs)("div",{className:"text-center",children:["\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430",(0,r.jsxs)("div",{className:"d-flex justify-content-center gap-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)(f.L7p,{size:30,className:p().like,onClick:function(){return t=n,void(0,h.PF)(null===g||void 0===g?void 0:g._id).then((function(n){S(null===t||void 0===t?void 0:t.acceptedRequest.filter((function(t){return 3===t.status}))[0],4,t._id)}));var t}})}),(0,r.jsx)("div",{children:(0,r.jsx)(f.Ov5,{size:30,className:p().unlike,onClick:function(){return t=n,void(0,h.ZG)(null===g||void 0===g?void 0:g._id).then((function(n){S(null===t||void 0===t?void 0:t.acceptedRequest.filter((function(t){return 3===t.status}))[0],4,t._id)}));var t}})})]})]}):(0,r.jsx)(i.Z,{type:"primary",onClick:function(){return function(t){R(!0),m(t),y(null===t||void 0===t?void 0:t._id)}(n)},children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438"})}}],O=[{title:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",dataIndex:"company",key:"company"},{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b (\u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430)",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"\u0426\u0435\u043d\u0430",dataIndex:"price",key:"price"},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",dataIndex:"comment",key:"comment"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430",dataIndex:"acceptRequest",key:"acceptRequest",render:function(t,n){var e,u=null===k||void 0===k?void 0:k.acceptedRequest.filter((function(t){return t.requestId===(null===n||void 0===n?void 0:n._id)}));if(0===u.length)return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return S(n,1)},children:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441"});if((null===k||void 0===k||null===(e=k.acceptedRequest)||void 0===e?void 0:e.filter((function(t){return 3===(null===t||void 0===t?void 0:t.status)})).length)>0){var o,c;if(3===(null===(o=u[0])||void 0===o?void 0:o.status))return(0,r.jsx)("div",{className:"text-center",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"});switch(null===(c=u[0])||void 0===c?void 0:c.status){case 1:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return S(n,2)},disabled:!0,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0437\u0430\u043a\u0430\u0437"});case 2:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return S(n,3)},disabled:!0,children:"\u041f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437"})}}else{var s;switch(null===(s=u[0])||void 0===s?void 0:s.status){case 1:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return S(n,2)},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0437\u0430\u043a\u0430\u0437"});case 2:return(0,r.jsx)(i.Z,{type:"primary",className:"w-100",onClick:function(){return S(n,3)},children:"\u041f\u0440\u0438\u043d\u044f\u043b \u0437\u0430\u043a\u0430\u0437"});case 3:return(0,r.jsx)("div",{className:"text-center",children:"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"})}}}}];return(0,r.jsxs)("div",{children:[(0,r.jsx)(u.Z,{dataSource:null===n||void 0===n?void 0:n.filter((function(t){return(null===t||void 0===t?void 0:t.accountId)===(null===g||void 0===g?void 0:g._id)})),columns:E,title:function(){return"\u041c\u043e\u0439 \u0437\u0430\u043a\u0430\u0437\u044b"},scroll:{x:800}}),(0,r.jsx)(o.Z,{title:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0438",open:C,onOk:function(){R(!1)},onCancel:function(){R(!1)},width:850,footer:[(0,r.jsx)(i.Z,{onClick:function(){return R(!1)},children:"\u041d\u0430\u0437\u0430\u0434"})],children:(0,r.jsx)(u.Z,{columns:O,dataSource:null===N||void 0===N?void 0:N.filter((function(t){return t.orderID==x})),pagination:!1})})]})}},3995:function(t){t.exports={like:"MyOrders_like__DinYI",unlike:"MyOrders_unlike__FQQ3J"}}},function(t){t.O(0,[885,222,156,997,171,369,444,896,71,774,888,179],(function(){return n=6140,t(t.s=n);var n}));var n=t.O();_N_E=n}]);